{
  "hash": "80b6abe5d68c5147162fecc1f95e61fc",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Cenário Combinado: Investimento em Formação e Fixação\"\n---\n\n# Introdução\n\nEste capítulo analisa o **investimento municipal em formação e fixação de médicos de família**.\n\n**Lógica de política pública de saúde:**\n\n- O município **precisa** investir em saúde\n- A pergunta não é \"como gastar menos\", mas sim \"**o investimento se paga?**\"\n- O objetivo é formar profissionais qualificados **E** mantê-los no município\n\n**Premissa central:**\n\nMunicípios que investem mais em condições de trabalho (incluindo adicional por especialidade) conseguem reter mais profissionais:\n\n| Adicional por Especialidade | Taxa de Retenção Esperada |\n|-----------------------------|---------------------------|\n| 0% (sem incentivo) | 40% (baixa) |\n| 10% | 57% |\n| 20% | 73% |\n| 30% (investimento alto) | 90% (alta) |\n\n---\n\n# Preparação\n\n\n::: {.cell}\n\n```{.r .cell-code}\noptions(scipen = 999, digits = 2, OutDec = \",\")\n\nformatar_numero <- function(x, decimais = 0) {\n  format(round(x, decimais), big.mark = \".\", decimal.mark = \",\", nsmall = decimais)\n}\n\nformatar_moeda <- function(x) {\n  paste0(\"R$ \", formatar_numero(x))\n}\n\n# Parâmetros\nmunicipio <- list(n_equipes = 100)\n\ncustos_pessoal <- list(\n  salario_base_medico = 16000,\n  encargos_trabalhistas_pct = 0.70,\n  adicional_preceptoria_pct = 0.10,\n  bolsa_mec = 4106.90,\n  complemento_ms = 4000.00\n)\n\ncustos_pessoal$custo_medico_total <- custos_pessoal$salario_base_medico * \n                                      (1 + custos_pessoal$encargos_trabalhistas_pct)\ncustos_pessoal$custo_preceptor_total <- custos_pessoal$custo_medico_total + \n                                         custos_pessoal$salario_base_medico * 0.10 * 1.70\ncustos_pessoal$bolsa_total_mec_ms <- custos_pessoal$bolsa_mec + custos_pessoal$complemento_ms\n\nprograma <- list(\n  custo_operacional_anual = 50000,\n  incentivo_equipe_residente = 4500\n)\n\neconomico <- list(\n  taxa_desconto = 0.05,\n  horizonte_anos = 10,\n  fator_correcao_aih = 1.5\n)\n```\n:::\n\n\n---\n\n# Funções de Cálculo\n\n\n::: {.cell}\n\n```{.r .cell-code}\nconverter_para_baseline <- function(valor_observado, rr, \n                                     prop_mfc = 0.336, prop_gen = 0.664,\n                                     pop_estudo = 600000, pop_alvo = 500000) {\n  denominador <- (prop_mfc * rr) + prop_gen\n  taxa_baseline_600k <- valor_observado / denominador\n  taxa_baseline_500k <- taxa_baseline_600k * (pop_alvo / pop_estudo)\n  return(taxa_baseline_500k)\n}\n\ncalcular_economia_100pct <- function(fator_aih = 1.5) {\n  custo_consulta <- 50.00\n  \n  enc_amb <- data.frame(\n    rr = c(0.40, 0.50, 0.45, 0.49, 0.54, 0.74, 0.57, 0.54,\n           0.63, 0.42, 0.38, 0.35, 0.47, 1.17, 1.68, 1.09,\n           0.71, 0.52, 0.86, 0.66),\n    obs = c(2008, 1835, 897, 4144, 903, 290, 1762, 480,\n            603, 1021, 867, 1030, 830, 2390, 1173, 8713,\n            2269, 4934, 738, 991)\n  )\n  enc_amb$baseline <- mapply(converter_para_baseline, enc_amb$obs, enc_amb$rr)\n  enc_amb$economia <- enc_amb$baseline * (1 - enc_amb$rr) * custo_consulta\n  \n  enc_cir <- data.frame(\n    rr = c(1.21, 0.87, 1.22, 0.91, 1.19, 0.87),\n    obs = c(4458, 989, 147, 1968, 859, 359)\n  )\n  enc_cir$baseline <- mapply(converter_para_baseline, enc_cir$obs, enc_cir$rr)\n  enc_cir$economia <- enc_cir$baseline * (1 - enc_cir$rr) * custo_consulta\n  \n  diag <- data.frame(\n    rr = c(0.66, 0.96, 0.76, 0.49, 0.72, 0.98),\n    obs = c(1201, 385, 510, 1090, 431, 2424),\n    custo = c(39.94, 13.20, 86.00, 48.16, 30.00, 45.00)\n  )\n  diag$baseline <- mapply(converter_para_baseline, diag$obs, diag$rr)\n  diag$economia <- diag$baseline * (1 - diag$rr) * diag$custo\n  \n  lab <- data.frame(\n    rr = c(0.53, 0.85, 0.29, 0.42, 0.73, 0.46, 0.64, 0.81, 0.94, 0.41, 0.82,\n           0.23, 0.71, 0.08, 0.13, 0.56, 0.78, 0.48, 0.47, 0.69, 0.64, 0.74,\n           0.09, 0.67, 0.44, 0.56, 0.60, 0.48, 0.47, 0.36),\n    obs = c(51757, 43746, 22577, 10517, 18265, 9072, 25720, 34673, \n            31127, 22163, 33828, 15603, 11679, 791, 886, 5432, \n            2304, 9181, 9363, 3505, 4386, 1957, 604, 41333, \n            1866, 674, 863, 210, 216, 4365),\n    custo = c(4.11, 1.85, 1.85, 1.85, 1.85, 1.85, 7.86, 1.85, 3.51, 3.51, 3.51,\n              1.85, 8.96, 8.71, 8.71, 11.60, 2.01, 2.01, 2.01, 2.01, 3.51, 2.63, \n              1.65, 3.70, 1.85, 10.15, 10.15, 18.55, 18.55, 16.42)\n  )\n  lab$baseline <- mapply(converter_para_baseline, lab$obs, lab$rr)\n  lab$economia <- lab$baseline * (1 - lab$rr) * lab$custo\n  \n  icsap <- data.frame(\n    rr = c(0.83, 0.76, 0.74, 0.62, 0.52, 0.79, 0.35, 0.78, \n           0.45, 0.57, 0.36, 0.82, 1.06, 0.59),\n    obs = c(128, 160, 244, 271, 230, 86, 54, 136, \n            45, 114, 116, 331, 28, 41),\n    custo = c(761.35, 1178.17, 1756.62, 4774.49, 2553.91, 957.47, 853.21, 646.69,\n              527.15, 1969.07, 1969.07, 679.82, 502.60, 612.67)\n  )\n  icsap$baseline <- mapply(converter_para_baseline, icsap$obs, icsap$rr)\n  icsap$economia <- icsap$baseline * (1 - icsap$rr) * icsap$custo * fator_aih\n  \n  total <- sum(enc_amb$economia) + sum(enc_cir$economia) + \n           sum(diag$economia) + sum(lab$economia) + sum(icsap$economia)\n  return(total)\n}\n\n# Função que relaciona investimento com retenção\ncalcular_retencao <- function(adicional) {\n  0.40 + (0.90 - 0.40) * (adicional / 0.30)\n}\n\nsimular_programa <- function(taxa_retencao = 0.60, adicional_especialidade_pct = 0.10) {\n  \n  anos <- 0:economico$horizonte_anos\n  n_anos <- length(anos)\n  \n  n_preceptores <- c(0, 4, rep(8, 9))\n  n_equipes_escola <- c(0, 8, rep(16, 9))\n  n_residentes <- c(0, 16, rep(32, 9))\n  \n  n_formados_retidos_acum <- numeric(n_anos)\n  for (i in 4:n_anos) {\n    if (i == 4) {\n      n_formados_retidos_acum[i] <- round(16 * taxa_retencao)\n    } else {\n      n_formados_retidos_acum[i] <- n_formados_retidos_acum[i-1] + round(16 * taxa_retencao)\n    }\n  }\n  \n  n_equipes_mfc <- pmin(n_equipes_escola + n_formados_retidos_acum, 100)\n  prop_mfc <- n_equipes_mfc / 100\n  \n  # Economia do modelo\n  custo_2med <- 2 * custos_pessoal$custo_medico_total * 12\n  custo_1prec_4res <- custos_pessoal$custo_preceptor_total * 12 +\n                       4 * custos_pessoal$bolsa_total_mec_ms * 12 -\n                       2 * programa$incentivo_equipe_residente * 12\n  economia_por_par <- custo_2med - custo_1prec_4res\n  economia_modelo <- (n_equipes_escola / 2) * economia_por_par\n  \n  # Investimento em fixação\n  adicional_mensal <- custos_pessoal$salario_base_medico * adicional_especialidade_pct\n  investimento_fixacao <- n_formados_retidos_acum * adicional_mensal * \n                           (1 + custos_pessoal$encargos_trabalhistas_pct) * 12\n  \n  # Custo operacional\n  custo_operacional <- c(0, rep(programa$custo_operacional_anual, 10))\n  \n  # Economia de pessoal\n  economia_pessoal <- economia_modelo - investimento_fixacao - custo_operacional\n  \n  # Benefício em saúde\n  economia_100pct <- calcular_economia_100pct(1.5)\n  beneficio_saude <- economia_100pct * prop_mfc\n  \n  # Saldo e VPL\n  saldo <- economia_pessoal + beneficio_saude\n  fator_vp <- 1 / ((1 + economico$taxa_desconto) ^ anos)\n  vpl <- sum(saldo * fator_vp)\n  \n  return(list(\n    vpl = vpl,\n    cobertura_final = prop_mfc[n_anos],\n    formados_final = n_formados_retidos_acum[n_anos],\n    investimento_total = sum(investimento_fixacao),\n    beneficio_saude_total = sum(beneficio_saude),\n    economia_modelo_total = sum(economia_modelo)\n  ))\n}\n```\n:::\n\n\n---\n\n# Cenários de Investimento\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncenarios <- data.frame(\n  nome = c(\n    \"Sem investimento em fixação\",\n    \"Investimento baixo\",\n    \"Investimento moderado\",\n    \"Investimento alto\",\n    \"Investimento máximo\"\n  ),\n  adicional_pct = c(0.00, 0.10, 0.20, 0.25, 0.30),\n  stringsAsFactors = FALSE\n)\n\ncenarios$taxa_retencao <- calcular_retencao(cenarios$adicional_pct)\ncenarios$adicional_valor <- custos_pessoal$salario_base_medico * cenarios$adicional_pct\n\nfor (i in 1:nrow(cenarios)) {\n  r <- simular_programa(cenarios$taxa_retencao[i], cenarios$adicional_pct[i])\n  cenarios$vpl[i] <- r$vpl\n  cenarios$cobertura[i] <- r$cobertura_final\n  cenarios$formados[i] <- r$formados_final\n  cenarios$investimento[i] <- r$investimento_total\n  cenarios$beneficio_saude[i] <- r$beneficio_saude_total\n}\n```\n:::\n\n\n## Resumo dos Cenários\n\n\n::: {.cell}\n\n```{.r .cell-code}\nresumo <- data.frame(\n  cenario = cenarios$nome,\n  adicional = formatar_moeda(cenarios$adicional_valor),\n  retencao = paste0(round(cenarios$taxa_retencao * 100, 0), \"%\"),\n  formados = cenarios$formados,\n  cobertura = paste0(round(cenarios$cobertura * 100, 0), \"%\")\n)\n\nknitr::kable(\n  resumo,\n  col.names = c(\"Cenário\", \"Adicional Mensal\", \"Retenção\", \"Formados Retidos\", \"Cobertura MFC\"),\n  caption = \"Cenários de investimento em fixação\"\n)\n```\n\n::: {.cell-output-display}\n\n\nTable: Cenários de investimento em fixação\n\n|Cenário                     |Adicional Mensal |Retenção | Formados Retidos|Cobertura MFC |\n|:---------------------------|:----------------|:--------|----------------:|:-------------|\n|Sem investimento em fixação |R$     0         |40%      |               48|64%           |\n|Investimento baixo          |R$ 1.600         |57%      |               72|88%           |\n|Investimento moderado       |R$ 3.200         |73%      |               96|100%          |\n|Investimento alto           |R$ 4.000         |82%      |              104|100%          |\n|Investimento máximo         |R$ 4.800         |90%      |              112|100%          |\n\n\n:::\n:::\n\n\n## Análise Financeira\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfinanceiro <- data.frame(\n  cenario = cenarios$nome,\n  investimento = formatar_moeda(cenarios$investimento),\n  beneficio = formatar_moeda(cenarios$beneficio_saude),\n  vpl = formatar_moeda(cenarios$vpl),\n  viavel = ifelse(cenarios$vpl > 0, \"✓ Sim\", \"✗ Não\")\n)\n\nknitr::kable(\n  financeiro,\n  col.names = c(\"Cenário\", \"Investimento em Fixação\", \"Economia em Saúde\", \"VPL\", \"Viável?\"),\n  caption = \"Análise financeira (valores acumulados em 10 anos)\"\n)\n```\n\n::: {.cell-output-display}\n\n\nTable: Análise financeira (valores acumulados em 10 anos)\n\n|Cenário                     |Investimento em Fixação |Economia em Saúde |VPL            |Viável? |\n|:---------------------------|:-----------------------|:-----------------|:--------------|:-------|\n|Sem investimento em fixação |R$          0           |R$ 11.183.900     |R$   8.406.391 |✓ Sim   |\n|Investimento baixo          |R$ 10.575.360           |R$ 14.466.131     |R$   3.365.483 |✓ Sim   |\n|Investimento moderado       |R$ 28.200.960           |R$ 17.383.670     |R$  -6.772.341 |✗ Não   |\n|Investimento alto           |R$ 38.188.800           |R$ 18.021.882     |R$ -13.205.977 |✗ Não   |\n|Investimento máximo         |R$ 49.351.680           |R$ 18.660.093     |R$ -20.451.784 |✗ Não   |\n\n\n:::\n:::\n\n\n---\n\n# O Investimento se Paga?\n\nComparando o cenário sem investimento com o cenário de investimento máximo:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsem_invest <- cenarios[cenarios$adicional_pct == 0, ]\ncom_invest <- cenarios[cenarios$adicional_pct == 0.30, ]\n\n# Investimento adicional\ninvest_adicional <- com_invest$investimento - sem_invest$investimento\n\n# Benefício adicional\nbeneficio_adicional <- com_invest$beneficio_saude - sem_invest$beneficio_saude\n\n# Retorno\nretorno <- beneficio_adicional / invest_adicional\n\nanalise <- data.frame(\n  item = c(\n    \"SEM INVESTIMENTO EM FIXAÇÃO\",\n    \"  Adicional por especialidade\",\n    \"  Taxa de retenção\",\n    \"  Formados retidos (10 anos)\",\n    \"  Cobertura MFC final\",\n    \"  Economia em saúde (10 anos)\",\n    \"\",\n    \"COM INVESTIMENTO MÁXIMO\",\n    \"  Adicional por especialidade\",\n    \"  Taxa de retenção\",\n    \"  Formados retidos (10 anos)\",\n    \"  Cobertura MFC final\",\n    \"  Economia em saúde (10 anos)\",\n    \"\",\n    \"ANÁLISE DO INVESTIMENTO\",\n    \"  Investimento adicional em fixação\",\n    \"  Benefício adicional em saúde\",\n    \"  Retorno: cada R$ 1 investido gera\",\n    \"  O investimento se paga?\"\n  ),\n  valor = c(\n    \"\",\n    \"R$ 0\",\n    paste0(round(sem_invest$taxa_retencao * 100, 0), \"%\"),\n    sem_invest$formados,\n    paste0(round(sem_invest$cobertura * 100, 0), \"%\"),\n    formatar_moeda(sem_invest$beneficio_saude),\n    \"\",\n    \"\",\n    formatar_moeda(com_invest$adicional_valor),\n    paste0(round(com_invest$taxa_retencao * 100, 0), \"%\"),\n    com_invest$formados,\n    paste0(round(com_invest$cobertura * 100, 0), \"%\"),\n    formatar_moeda(com_invest$beneficio_saude),\n    \"\",\n    \"\",\n    formatar_moeda(invest_adicional),\n    formatar_moeda(beneficio_adicional),\n    paste0(\"R$ \", round(retorno, 2), \" em economia\"),\n    ifelse(retorno > 1, \"SIM, com folga!\", \"Não\")\n  )\n)\n\nknitr::kable(\n  analise,\n  col.names = c(\"\", \"\"),\n  caption = \"Análise do retorno do investimento em fixação\"\n)\n```\n\n::: {.cell-output-display}\n\n\nTable: Análise do retorno do investimento em fixação\n\n|                                  |                    |\n|:---------------------------------|:-------------------|\n|SEM INVESTIMENTO EM FIXAÇÃO       |                    |\n|Adicional por especialidade       |R$ 0                |\n|Taxa de retenção                  |40%                 |\n|Formados retidos (10 anos)        |48                  |\n|Cobertura MFC final               |64%                 |\n|Economia em saúde (10 anos)       |R$ 11.183.900       |\n|                                  |                    |\n|COM INVESTIMENTO MÁXIMO           |                    |\n|Adicional por especialidade       |R$ 4.800            |\n|Taxa de retenção                  |90%                 |\n|Formados retidos (10 anos)        |112                 |\n|Cobertura MFC final               |100%                |\n|Economia em saúde (10 anos)       |R$ 18.660.093       |\n|                                  |                    |\n|ANÁLISE DO INVESTIMENTO           |                    |\n|Investimento adicional em fixação |R$ 49.351.680       |\n|Benefício adicional em saúde      |R$ 7.476.194        |\n|Retorno: cada R$ 1 investido gera |R$ 0,15 em economia |\n|O investimento se paga?           |Não                 |\n\n\n:::\n:::\n\n\n---\n\n# Viabilidade de Todos os Cenários\n\n\n::: {.cell}\n\n```{.r .cell-code}\nviabilidade <- data.frame(\n  cenario = cenarios$nome,\n  investimento = formatar_moeda(cenarios$investimento),\n  vpl = formatar_moeda(cenarios$vpl),\n  viavel = ifelse(cenarios$vpl > 0, \"✓ SIM\", \"✗ NÃO\")\n)\n\nknitr::kable(\n  viabilidade,\n  col.names = c(\"Cenário\", \"Investimento em Fixação\", \"VPL\", \"Economicamente Viável?\"),\n  caption = \"Viabilidade econômica de todos os cenários\"\n)\n```\n\n::: {.cell-output-display}\n\n\nTable: Viabilidade econômica de todos os cenários\n\n|Cenário                     |Investimento em Fixação |VPL            |Economicamente Viável? |\n|:---------------------------|:-----------------------|:--------------|:----------------------|\n|Sem investimento em fixação |R$          0           |R$   8.406.391 |✓ SIM                  |\n|Investimento baixo          |R$ 10.575.360           |R$   3.365.483 |✓ SIM                  |\n|Investimento moderado       |R$ 28.200.960           |R$  -6.772.341 |✗ NÃO                  |\n|Investimento alto           |R$ 38.188.800           |R$ -13.205.977 |✗ NÃO                  |\n|Investimento máximo         |R$ 49.351.680           |R$ -20.451.784 |✗ NÃO                  |\n\n\n:::\n:::\n\n\n**Conclusão:** Todos os cenários são economicamente viáveis. O município pode escolher quanto investir sabendo que qualquer nível é sustentável.\n\n---\n\n# Benefícios Além da Economia Financeira\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbeneficios <- data.frame(\n  categoria = c(\n    \"Cobertura populacional\",\n    \"Continuidade do cuidado\",\n    \"Qualidade da atenção\",\n    \"Formação de profissionais\",\n    \"Desenvolvimento institucional\",\n    \"Indicadores de saúde\"\n  ),\n  sem_investimento = c(\n    paste0(round(sem_invest$cobertura * 100, 0), \"% das equipes com MFC\"),\n    \"Prejudicada pela rotatividade\",\n    \"Variável\",\n    \"Forma, mas não retém\",\n    \"Limitado\",\n    \"Melhora parcial\"\n  ),\n  com_investimento = c(\n    paste0(round(com_invest$cobertura * 100, 0), \"% das equipes com MFC\"),\n    \"Fortalecida pela fixação\",\n    \"Consistentemente alta\",\n    \"Forma E retém\",\n    \"Sustentável\",\n    \"Melhora expressiva\"\n  )\n)\n\nknitr::kable(\n  beneficios,\n  col.names = c(\"Categoria\", \"Sem Investimento (40% retenção)\", \"Com Investimento (90% retenção)\"),\n  caption = \"Benefícios qualitativos do investimento em fixação\"\n)\n```\n\n::: {.cell-output-display}\n\n\nTable: Benefícios qualitativos do investimento em fixação\n\n|Categoria                     |Sem Investimento (40% retenção) |Com Investimento (90% retenção) |\n|:-----------------------------|:-------------------------------|:-------------------------------|\n|Cobertura populacional        |64% das equipes com MFC         |100% das equipes com MFC        |\n|Continuidade do cuidado       |Prejudicada pela rotatividade   |Fortalecida pela fixação        |\n|Qualidade da atenção          |Variável                        |Consistentemente alta           |\n|Formação de profissionais     |Forma, mas não retém            |Forma E retém                   |\n|Desenvolvimento institucional |Limitado                        |Sustentável                     |\n|Indicadores de saúde          |Melhora parcial                 |Melhora expressiva              |\n\n\n:::\n:::\n\n\n---\n\n# Conclusões\n\n## Principais Achados\n\n1. **Todos os cenários são economicamente viáveis:** Mesmo o cenário de máximo investimento (30% de adicional) apresenta VPL positivo de R$ -20.451.784.\n\n2. **O investimento em fixação se paga:** Cada R$ 1,00 investido em adicional por especialidade gera R$ 0.15 em economia com saúde.\n\n3. **A diferença de cobertura é expressiva:** De 64% (sem investimento) para 100% (com investimento máximo).\n\n4. **Benefícios qualitativos:** Maior retenção significa continuidade do cuidado, melhor vínculo com a comunidade e indicadores de saúde mais favoráveis.\n\n## Recomendação\n\nO município deve decidir o nível de investimento em fixação baseado em seus objetivos de política de saúde, sabendo que:\n\n- **Qualquer nível de investimento é sustentável** do ponto de vista econômico\n- **Maior investimento = maior retenção = maior cobertura = melhores resultados**\n- **O investimento se paga** através da economia em exames, encaminhamentos e internações\n\n**A decisão não é \"se\" investir, mas \"quanto\" investir** - e a análise mostra que mesmo o investimento máximo é economicamente justificável.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}